$schema: "http://json-schema.org/draft-06/schema"
$id: "https://errorcorrectionzoo.org/schemas/ecc"

#
# A <ECC> data structure is an object (key/value pairs) with the following
# properties.
#
type: object
additionalProperties: false
required: ['code_id', 'name', 'description', ]
properties:

  # every code must have a code_id.
  code_id:
    type: string
    pattern: '^[a-z0-9_.-]+$'
    _description: >-
      An internal identifier for the code.  It must be unique across all codes
      on the error correction zoo.

  # every code must have a name.
  name:
    type: string
    _minilatex: 'only-formatting'
    _description: >-
      The name of the code.  It is listed in multiple places, so don't make it
      too long.

  # every code must have a description.
  description:
    type: string
    _minilatex: 'full'
    _description: >-
      Describe code subspace as best as you can here.  Anything applicable to a
      larger parent set of codes (see below) should go in that entry instead of
      here.

  # \cite{...} reference where the code was introduced.
  introduced:
    type: string
    _minilatex: 'full'
    _description: >-
      First reference with the code (optional).  This field should be a single
      ‘\cite{}’ command with the appropriate reference(s).  Recall that you can
      cite multiple references with a single ‘\cite’ command, separating keys
      with commas.


  # TODO: we should fix the values these fields can take
  physical:
    type: string
    pattern: '^[a-z0-9_.-]+$'

  logical:
    type: string
    pattern: '^[a-z0-9_.-]+$'


  protection:
    type: string

  decoder:
    type: string

  realizations:
    type: string

  features:
    $ref: '/schemas/ecc_features'

  notes:
    type: array
    items:
      type: string

  #
  # Relations of the code to other codes:
  #
  relations:
    type: object
    additionalProperties: false
    properties:
      # List of code_ids that are a "parent" of the present code
      parents:
        $ref: '/schemas/relation_list'
      cousins:
        $ref: '/schemas/relation_list'
